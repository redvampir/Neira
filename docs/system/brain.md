# Мозг (brain)

<!-- neira:meta
id: NEI-20240918-brain-doc
intent: docs
summary: Описана структура мозга и взаимодействие с DataFlow, EventBus и TaskScheduler.
-->

## Обзор
Модуль `brain` объединяет ключевые органы Нейры и управляет их работой. Он
получает сообщения из `DataFlow`, превращая их либо в события, либо в задачи для
обработки. Сам `brain` не хранит состояние диалогов, а служит маршрутизатором
между подсистемами.

## Структура
- **DataFlow Receiver** — входной канал, через который приходят сообщения
  `FlowMessage`.
- **CellRegistry** — реестр «нейронов», то есть специализированных клеток
  анализа.
- **EventBus** — шина событий для рассылки уведомлений по системе.
- **TaskScheduler** — очередь задач с приоритетами.

## Взаимодействие
1. `brain` принимает `FlowMessage` из `DataFlow`.
2. Если это событие, оно публикуется в `EventBus` без обратной пересылки.
3. Если это задача, она ставится в `TaskScheduler`; затем нужная клетка
   анализа берёт задачу из очереди и запускается.

Такой цикл позволяет мозгу распределять работу между клетками и удерживать
общую координацию системы без тесной связности между модулями.
