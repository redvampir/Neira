<!-- neira:meta
id: NEI-20270210-schema-sync-doc
intent: docs
summary: Описан автообновление JSON Schema из архива по SCHEMAS_ARCHIVE_URL.
-->
<!-- neira:meta
id: NEI-20270305-schema-sync-async-doc
intent: docs
summary: Уточнено, что синхронизация выполняется асинхронно с таймаутом 10s и переменной SCHEMAS_SYNC_TIMEOUT_SECS.
-->

# Синхронизация схем

При запуске `spinal_cord` в фоне проверяет дату архива схем, указанного
переменной `SCHEMAS_ARCHIVE_URL`. Если заголовок `Last-Modified` показывает,
что архив новее сохранённой отметки, содержимое скачивается и
распаковывается в каталог `SCHEMAS_DIR` (по умолчанию `schemas`). В файл
`.last_schema_sync` сохраняется время обновления, что позволяет пропускать
загрузку при неизменных схемах. Сетевые запросы имеют таймаут 10 секунд,
изменяемый переменной `SCHEMAS_SYNC_TIMEOUT_SECS`.

Чтобы форсировать обновление, удалите файл `.last_schema_sync` или замените
архив на сервере. Такой механизм обеспечивает Нейре актуальные JSON Schema
без ручных действий.

